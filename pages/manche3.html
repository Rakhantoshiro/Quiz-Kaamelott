<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Troisi√®me manche du Quiz Kaamelott - Contre la montre">
    <title>Manche 3 - Quiz Kaamelott</title>
    <link rel="stylesheet" href="../assets/style.css">
    <script>
        let timer;
        let timeLeft = 120; // 2 minutes par d√©faut
        let questionsAnswered = 0;
        let currentQuestion = 0;

        function updateScore(team, delta) {
            const scoreElement = document.getElementById(`score-${team}`);
            let score = parseInt(scoreElement.textContent, 10);
            score = Math.max(0, score + delta);
            scoreElement.textContent = score;
            localStorage.setItem(`manche3-score-${team}`, score);
        }

        function loadScores() {
            const score1 = localStorage.getItem('manche3-score-1') || 0;
            const score2 = localStorage.getItem('manche3-score-2') || 0;
            document.getElementById('score-1').textContent = score1;
            document.getElementById('score-2').textContent = score2;
        }

        function startTimer() {
            const timerDisplay = document.getElementById('timer');
            const progressFill = document.getElementById('progress-fill');
            const startBtn = document.getElementById('start-btn');
            const stopBtn = document.getElementById('stop-btn');
            
            startBtn.style.display = 'none';
            stopBtn.style.display = 'inline-block';
            
            timer = setInterval(() => {
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                // Mise √† jour de la barre de progression
                const progressPercent = ((120 - timeLeft) / 120) * 100;
                progressFill.style.width = progressPercent + '%';
                
                if (timeLeft <= 0) {
                    stopTimer();
                    alert('Temps √©coul√© ! Questions r√©pondues : ' + questionsAnswered);
                }
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timer);
            const startBtn = document.getElementById('start-btn');
            const stopBtn = document.getElementById('stop-btn');
            startBtn.style.display = 'inline-block';
            stopBtn.style.display = 'none';
        }

        function resetTimer() {
            stopTimer();
            timeLeft = 120;
            questionsAnswered = 0;
            currentQuestion = 0;
            document.getElementById('timer').textContent = '2:00';
            document.getElementById('progress-fill').style.width = '0%';
            document.getElementById('questions-count').textContent = questionsAnswered;
        }

        function addQuestion() {
            questionsAnswered++;
            document.getElementById('questions-count').textContent = questionsAnswered;
        }

        function removeQuestion() {
            questionsAnswered = Math.max(0, questionsAnswered - 1);
            document.getElementById('questions-count').textContent = questionsAnswered;
        }

        window.onload = loadScores;
    </script>
</head>
<body>
    <div class="header">
        <div class="score-container">
            <div class="team">
                <h2>Les Chevaliers de la Table Ronde</h2>
                <div id="score-1">0</div>
                <button onclick="updateScore(1, -1)" style="background-color:rgb(130, 11, 11)">-1</button>
                <button onclick="updateScore(1, -5)" style="background-color:rgb(130, 11, 11)">-5</button>
                <button onclick="updateScore(1, 1)" style="background-color:rgb(11, 130, 49)">+1</button>
                <button onclick="updateScore(1, 5)" style="background-color:rgb(11, 130, 49)">+5</button>
            </div>
            <div class="team">
                <h2>Les F√©lons de Logres</h2>
                <div id="score-2">0</div>
                <button onclick="updateScore(2, -1)" style="background-color:rgb(130, 11, 11)">-1</button>
                <button onclick="updateScore(2, -5)" style="background-color:rgb(130, 11, 11)">-5</button>
                <button onclick="updateScore(2, 1)" style="background-color:rgb(11, 130, 49)">+1</button>
                <button onclick="updateScore(2, 5)" style="background-color:rgb(11, 130, 49)">+5</button>
            </div>
        </div>
    </div>

    <div class="quiz-container">
        <h1 class="quiz-title">‚è±Ô∏è Troisi√®me Manche - Contre la Montre ‚è∞</h1>
        
        <div class="quiz-item" style="max-width: 600px; margin-bottom: 30px;">
            <h3>üìã R√®gles de la Manche 3</h3>
            <p><strong>Format :</strong> Questions avec temps limit√©</p>
            <p><strong>Objectif :</strong> R√©pondre √† un maximum de questions dans le temps imparti (2 minutes)</p>
            <p><strong>Scoring :</strong> +1 point par bonne r√©ponse, utilisez les boutons de score pour ajuster</p>
        </div>

        <div class="timer-container">
            <h3>‚è∞ Timer</h3>
            <div id="timer" class="timer">2:00</div>
            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill"></div>
            </div>
            <div style="margin: 15px 0;">
                <button id="start-btn" onclick="startTimer()" class="quiz-button" style="background-color: #28a745; margin: 5px;">
                    ‚ñ∂Ô∏è D√©marrer
                </button>
                <button id="stop-btn" onclick="stopTimer()" class="quiz-button" style="background-color: #dc3545; margin: 5px; display: none;">
                    ‚èπÔ∏è Arr√™ter
                </button>
                <button onclick="resetTimer()" class="quiz-button" style="background-color: #6c757d; margin: 5px;">
                    üîÑ Reset
                </button>
            </div>
        </div>

        <div class="quiz-grid">
            <div class="quiz-item">
                <h3>üìä Compteur de Questions</h3>
                <p>Questions r√©pondues :</p>
                <div style="font-size: 2rem; font-weight: bold; color: #2c3e50; margin: 10px 0;">
                    <span id="questions-count">0</span>
                </div>
                <div>
                    <button onclick="addQuestion()" class="quiz-button" style="background-color: #28a745; margin: 5px;">
                        ‚ûï Question r√©pondue
                    </button>
                    <button onclick="removeQuestion()" class="quiz-button" style="background-color: #dc3545; margin: 5px;">
                        ‚ûñ Annuler
                    </button>
                </div>
            </div>
            
            <div class="quiz-item">
                <h3>üìù Instructions</h3>
                <p>1. D√©marrez le timer</p>
                <p>2. Posez les questions du document "troisieme_manche.docx"</p>
                <p>3. Cliquez sur "Question r√©pondue" pour chaque bonne r√©ponse</p>
                <p>4. Ajustez les scores avec les boutons +/- en haut</p>
                <p>5. Le timer s'arr√™te automatiquement √† 0</p>
            </div>
        </div>
        
        <a href="../index.html" class="back-link">Retour √† l'accueil</a>
    </div>
</body>
</html>